# =============================================================================
# Enhanced Kitty Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Include Catppuccin Theme
# -----------------------------------------------------------------------------
include catppuccin-mocha.conf

# -----------------------------------------------------------------------------
# Fonts
# -----------------------------------------------------------------------------
font_family      CaskaydiaCove Nerd Font
bold_font        CaskaydiaCove Nerd Font Bold
italic_font      CaskaydiaCove Nerd Font Italic
bold_italic_font CaskaydiaCove Nerd Font Bold Italic
font_size 14.0

# Enable font ligatures
disable_ligatures never

# -----------------------------------------------------------------------------
# Cursor
# -----------------------------------------------------------------------------
cursor_shape block
cursor_blink_interval 0.5
cursor_stop_blinking_after 15.0

# Cursor trail effect (cool visual)
cursor_trail 100
cursor_trail_decay 0.1 0.4
cursor_trail_start_threshold 2

# -----------------------------------------------------------------------------
# Scrollback
# -----------------------------------------------------------------------------
scrollback_lines 10000
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER

# -----------------------------------------------------------------------------
# Mouse
# -----------------------------------------------------------------------------
mouse_hide_wait 3.0
url_style curly
open_url_with default
detect_urls yes
copy_on_select clipboard

# -----------------------------------------------------------------------------
# Performance
# -----------------------------------------------------------------------------
repaint_delay 10
input_delay 3
sync_to_monitor yes

# -----------------------------------------------------------------------------
# Terminal Bell
# -----------------------------------------------------------------------------
enable_audio_bell no
visual_bell_duration 0.0
window_alert_on_bell yes
bell_on_tab "ðŸ”” "

# -----------------------------------------------------------------------------
# Window Layout
# -----------------------------------------------------------------------------
remember_window_size  no
initial_window_width  120c
initial_window_height 30c

window_padding_width 8
single_window_padding_width 8

placement_strategy center
hide_window_decorations no

# -----------------------------------------------------------------------------
# Tab Bar
# -----------------------------------------------------------------------------
tab_bar_edge bottom
tab_bar_style powerline
tab_powerline_style round
tab_bar_min_tabs 1

tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}: {title}"
active_tab_title_template "{fmt.fg._cba6f7}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}: {title}"

# -----------------------------------------------------------------------------
# Background
# -----------------------------------------------------------------------------
background_opacity 0.85
dynamic_background_opacity yes
background_blur 32

# -----------------------------------------------------------------------------
# Advanced
# -----------------------------------------------------------------------------
shell /usr/bin/zsh
editor nvim
allow_remote_control socket-only
listen_on unix:/tmp/kitty
shell_integration enabled

# Clipboard
clipboard_control write-clipboard write-primary read-clipboard-ask read-primary-ask
clipboard_max_size 512

# -----------------------------------------------------------------------------
# Keyboard Shortcuts
# -----------------------------------------------------------------------------
kitty_mod ctrl+shift

# Clipboard
map kitty_mod+c copy_to_clipboard
map kitty_mod+v paste_from_clipboard

# Font size
map kitty_mod+equal change_font_size all +2.0
map kitty_mod+minus change_font_size all -2.0
map kitty_mod+backspace change_font_size all 0

# Window management
map kitty_mod+enter new_window_with_cwd
map kitty_mod+n new_os_window_with_cwd
map kitty_mod+w close_window
map kitty_mod+] next_window
map kitty_mod+[ previous_window

# Tab management
map kitty_mod+t new_tab_with_cwd
map kitty_mod+q close_tab
map kitty_mod+right next_tab
map kitty_mod+left previous_tab
map kitty_mod+. move_tab_forward
map kitty_mod+, move_tab_backward

# Layout
map kitty_mod+l next_layout

# Scrollback
map kitty_mod+k scroll_line_up
map kitty_mod+j scroll_line_down
map kitty_mod+page_up scroll_page_up
map kitty_mod+page_down scroll_page_down
map kitty_mod+home scroll_home
map kitty_mod+end scroll_end
map kitty_mod+h show_scrollback

# Hints (for selecting URLs, files, etc.)
map kitty_mod+e open_url_with_hints
map kitty_mod+p>f kitten hints --type path --program -
map kitty_mod+p>l kitten hints --type line --program -
map kitty_mod+p>w kitten hints --type word --program -

# Background opacity
map kitty_mod+a>m set_background_opacity +0.1
map kitty_mod+a>l set_background_opacity -0.1
map kitty_mod+a>1 set_background_opacity 1
map kitty_mod+a>d set_background_opacity default

# Misc
map kitty_mod+f11 toggle_fullscreen
map kitty_mod+f10 toggle_maximized
map kitty_mod+u kitten unicode_input
map kitty_mod+f2 edit_config_file
map kitty_mod+f5 load_config_file
map kitty_mod+f6 debug_config

# Quick actions
map ctrl+shift+g kitten hints --type=linenum --linenum-action=tab nvim +{line} {path}